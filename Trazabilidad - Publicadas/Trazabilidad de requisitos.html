<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      font-family: sans-serif;
    }

    table,
    th,
    td {
      border: 1px solid #A0A0A0;
      border-collapse: collapse;
      padding: 3px;
      vertical-align: top;
    }

    li {}
  </style>
  <title>export of TreeSheets file C:\Users\jlarracoech\OneDrive -
    ---\Documents\BIDEROAD\Publicado\BIDEROAD\Trazabilidad\Trazabilidad de requisitos.cts</title>
  <meta charset="UTF-8" />
</head>

<body>

  <table style="border-width: 2pt; font-size: 13pt;">
    <tr>
      <td style="font-weight: bold;background-color: #FFFFFF;">C:\Users\jlarracoech\OneDrive -
        ---\Documents\BIDEROAD\Publicado\BIDEROAD\Trazabilidad - Publicadas\Trazabilidad de requisitos.html
      </td>
      <td style="background-color: #FFFFFF;">
      </td>
      <td style="background-color: #FFFFFF;">
      </td>
    </tr>
    <tr>
      <td style="font-weight: bold;background-color: #FFFFFF;">Web
      </td>
      <td style="background-color: #FFFFFF;">Movil
      </td>
      <td style="background-color: #FFFFFF;">Vision artificial
      </td>
    </tr>
    <tr>
      <td style="background-color: #FFFFFF;">
        <table style="border-width: 2pt; font-size: 12pt;">
          <tr>
            <td style="font-weight: bold;background-color: #FFFFC0;">Requisitos
            </td>
          </tr>
          <tr>
            <td style="background-color: #FFFFC0;">
              <table style="border-width: 2pt; font-size: 11pt;">
                <tr>
                  <td style="font-weight: bold;background-color: #FFFFFF;">ID (R000.SR000.F000.SF000.P000.SP000.EC000)
                  </td>
                  <td style="font-weight: bold;background-color: #FFFFFF;">Fecha
                  </td>
                  <td style="font-weight: bold;background-color: #FFFFFF;">Descripcion
                  </td>
                  <td style="font-weight: bold;">Sub-requisitos
                  </td>
                  <td style="font-weight: bold;background-color: #C0FFFF;">Funciones
                  </td>
                  <td style="font-weight: bold;background-color: #FFFFFF;">Dependencias
                  </td>
                  <td style="font-weight: bold;background-color: #FFFFFF;">Version asociada
                  </td>
                  <td style="font-weight: bold;background-color: #FFFFFF;">Estado
                    <table style="border-width: 2pt; font-size: 10pt;">
                      <tr>
                        <td style="font-weight: normal;">Estable
                        </td>
                        <td style="font-weight: normal;">La ultima version cumple con el requisito, sus funcionalidades
                          han sido probadas integramente y todos los problemas han sido solventados.
                        </td>
                      </tr>
                      <tr>
                        <td style="font-weight: normal;">Beta
                        </td>
                        <td style="font-weight: normal;">Mismo que actualizado pero de forma parcial: faltan pruebas por
                          realizar, errores por corregir
                        </td>
                      </tr>
                      <tr>
                        <td style="font-weight: normal;">Alfa
                        </td>
                        <td style="font-weight: normal;">
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
                <tr>
                  <td style="background-color: #FFFFFF;">R345.SR678.F234.SF567.P890.SP123.EC456
                  </td>
                  <td style="background-color: #FFFFFF;">
                  </td>
                  <td style="background-color: #FFFFFF;">
                  </td>
                  <td style="font-weight: bold;">
                    <table style="border-width: 2pt; font-size: 10pt;">
                      <tr>
                        <td style="background-color: #FFFFFF;">ID (R000.SR000.F000.SF000.P000.SP000.EC000)
                        </td>
                        <td style="background-color: #FFFFFF;">Descripcion
                        </td>
                        <td style="background-color: #FFFFFF;">Dependencias
                        </td>
                        <td style="background-color: #FFFFFF;">Estado
                        </td>
                        <td style="background-color: #FFFFFF;">Version asociada
                        </td>
                      </tr>
                      <tr>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                          <table style="border-width: 2pt; font-size: 9pt;">
                            <tr>
                              <td>Tipo
                              </td>
                              <td>ID (D-Rxxx.SRxxx.Fxxx.SFxxx.Pxxx.SPxxx.ECxxx)
                              </td>
                            </tr>
                            <tr>
                              <td>?
                              </td>
                              <td style="font-weight: normal;">D-R345.SR678.F234.SF567.P890.SP123.EC456
                              </td>
                            </tr>
                          </table>
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                      </tr>
                      <tr>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td style="background-color: #C0FFFF;">
                    <table style="border-width: 2pt; font-size: 10pt;">
                      <tr>
                        <td style="font-weight: bold;background-color: #FFFFFF;">ID
                          (R000.SR000.F000.SF000.P000.SP000.EC000)
                        </td>
                        <td style="font-weight: bold;background-color: #FFFFFF;">Descripcion
                        </td>
                        <td style="font-weight: bold;">Sub-funciones
                        </td>
                        <td style="font-weight: bold;background-color: #FFC0C0;">Pruebas
                        </td>
                        <td style="font-weight: bold;background-color: #FFFFFF;">Dependencias
                        </td>
                        <td style="font-weight: bold;background-color: #FFFFFF;">Version asociada
                        </td>
                        <td style="font-weight: bold;background-color: #FFFFFF;">Estado
                        </td>
                      </tr>
                      <tr>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td>
                          <table style="border-width: 2pt; font-size: 9pt;">
                            <tr>
                              <td style="font-weight: bold;background-color: #FFFFFF;">ID
                                (R000.SR000.F000.SF000.P000.SP000.EC000)
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Descripcion
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Dependencias
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Version asociada
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Estado
                              </td>
                            </tr>
                            <tr>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                                <table style="border-width: 2pt; font-size: 8pt;">
                                  <tr>
                                    <td>ID
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>R001.SR001.F001
                                    </td>
                                  </tr>
                                </table>
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                            </tr>
                          </table>
                        </td>
                        <td style="background-color: #FFC0C0;">
                          <table style="border-width: 2pt; font-size: 9pt;">
                            <tr>
                              <td style="font-weight: bold;background-color: #FFFFFF;">ID
                                (R000.SR000.F000.SF000.P000.SP000.EC000)
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Descripcion
                                <table style="border-width: 2pt; font-size: 8pt;">
                                  <tr>
                                    <td>
                                    </td>
                                  </tr>
                                </table>
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Dependencias
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Version asociada
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Estado
                              </td>
                              <td style="font-weight: bold;">Sub-pruebas
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">Edge cases
                              </td>
                            </tr>
                            <tr>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                                <table style="border-width: 2pt; font-size: 8pt;">
                                  <tr>
                                    <td>Tipo
                                    </td>
                                    <td>ID
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                    </td>
                                    <td style="font-weight: normal;">R345.SR678.F234.SF567.P890.SP123.EC456
                                    </td>
                                  </tr>
                                </table>
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;background-color: #FFFFFF;">
                              </td>
                              <td style="font-weight: bold;">
                                <table style="border-width: 2pt; font-size: 8pt;">
                                  <tr>
                                    <td style="background-color: #FFFFFF;">ID (xxx.SRxxx.Fxxx.Pxxx
                                    </td>
                                    <td style="background-color: #FFFFFF;">Descripcion
                                    </td>
                                    <td style="background-color: #FFFFFF;">Dependencias
                                    </td>
                                    <td style="background-color: #FFFFFF;">Version asociada
                                    </td>
                                    <td style="background-color: #FFFFFF;">Estado
                                    </td>
                                  </tr>
                                  <tr>
                                    <td style="background-color: #FFFFFF;">
                                    </td>
                                    <td style="background-color: #FFFFFF;">
                                    </td>
                                    <td style="background-color: #FFFFFF;">
                                      <table style="border-width: 2pt; font-size: 7pt;">
                                        <tr>
                                          <td>Tipo
                                          </td>
                                          <td>ID
                                          </td>
                                        </tr>
                                      </table>
                                    </td>
                                    <td style="background-color: #FFFFFF;">
                                    </td>
                                    <td style="background-color: #FFFFFF;">
                                    </td>
                                  </tr>
                                </table>
                              </td>
                              <td style="background-color: #FFFFFF;">
                                <table style="border-width: 2pt; font-size: 8pt;">
                                  <tr>
                                    <td style="font-weight: bold;">ID (Rxxx.SRxxx.Fxxx.SFxxx.Pxxx.ECxxx)
                                    </td>
                                    <td style="font-weight: bold;">Descripcion
                                    </td>
                                    <td style="font-weight: bold;">Errores Encontrados
                                    </td>
                                    <td style="font-weight: bold;">Dependencias
                                    </td>
                                    <td style="font-weight: bold;">Version asociada
                                    </td>
                                    <td style="font-weight: bold;">Estado
                                    </td>
                                  </tr>
                                  <tr>
                                    <td style="font-weight: bold;">
                                    </td>
                                    <td style="font-weight: bold;">
                                    </td>
                                    <td style="font-weight: bold;">
                                      <table style="border-width: 2pt; font-size: 7pt;">
                                        <tr>
                                          <td>Nivel
                                            <table style="border-width: 2pt; font-size: 6pt;">
                                              <tr>
                                                <td>1
                                                </td>
                                                <td>Funciona parcialmente y pasa desapercibido
                                                </td>
                                              </tr>
                                              <tr>
                                                <td>2
                                                </td>
                                                <td>Funciona parcialmente y genera un error en otro sitio
                                                </td>
                                              </tr>
                                              <tr>
                                                <td>3
                                                </td>
                                                <td>No funciona y no afecta nada mas
                                                </td>
                                              </tr>
                                              <tr>
                                                <td>4
                                                </td>
                                                <td>No funciona y afecta a otras entidades
                                                </td>
                                              </tr>
                                              <tr>
                                                <td>5
                                                </td>
                                                <td>No funciona y colapsa el aplicativo
                                                </td>
                                              </tr>
                                            </table>
                                          </td>
                                        </tr>
                                      </table>
                                    </td>
                                    <td style="font-weight: bold;">
                                      <table style="border-width: 2pt; font-size: 7pt;">
                                        <tr>
                                          <td>Tipo
                                          </td>
                                          <td>ID
                                          </td>
                                        </tr>
                                      </table>
                                    </td>
                                    <td style="font-weight: bold;">
                                      <table style="border-width: 2pt; font-size: 7pt;">
                                        <tr>
                                          <td>
                                          </td>
                                        </tr>
                                      </table>
                                    </td>
                                    <td style="font-weight: bold;">
                                    </td>
                                  </tr>
                                </table>
                              </td>
                            </tr>
                          </table>
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                        <td style="background-color: #FFFFFF;">
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td style="background-color: #FFFFFF;">
                    <table style="border-width: 2pt; font-size: 10pt;">
                      <tr>
                        <td style="font-weight: bold;">Tipo
                        </td>
                        <td style="font-weight: bold;">ID
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td style="background-color: #FFFFFF;">
                    <table style="border-width: 2pt; font-size: 10pt;">
                      <tr>
                        <td style="font-weight: bold;">Version
                        </td>
                        <td style="font-weight: bold;">Fecha
                        </td>
                        <td style="font-weight: bold;">Estado
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td style="background-color: #FFFFFF;">
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </td>
      <td style="background-color: #FFFFFF;">
      </td>
      <td style="background-color: #FFFFFF;">
      </td>
    </tr>
  </table>
  <script>
    var ultima_migaja;
    var diccionario_ids_dom = new Object();
    var diccionario_ids_trazabilidad = new Object();

    function seguir_pista(entrada_migaja, entrada_objetivo) {
      //la entrada de la migaja es un objeto del DOM
      //la entrada_objetivo es el ID al que queremos ir
      console.log("Pistas: " + entrada_migaja + "," + entrada_objetivo);
      ultima_migaja = entrada_migaja;
      enfocar(entrada_objetivo.trim());

    }

    function retornar_pista() {
      enfocar(entrada_migaja);
    }

    function ver_relativos(entrada) {
      alert("Descendientes: " + entrada);
    }

    function enfocar(entrada) {
      try {
        if (typeof (entrada) == 'object') {
          entrada.focus();
        } else {
          document.getElementById(entrada).focus();
        }
      } catch (error) {
        alert('Error al intentar enfocar objecto: ' + entrada);
      }


    }

    function colocar_migajas() {

      for (let a = 0; a < document.getElementsByTagName('td').length; a++) {
        var current_td_data = document.getElementsByTagName('td')[a].innerHTML;
        if (document.getElementsByTagName('td')[a].childNodes.length == 1) {
          //Transformamos las strings de ID dentro de los elementos td en elementos <a>
          const pattern1 = /^R\d{3}\.SR\d{3}\.F\d{3}\.SF\d{3}\.P\d{3}\.SP\d{3}\.EC\d{3}$/;//patron de IDs de elementos
          if (pattern1.test(current_td_data.trim())) {
            console.log("Testing TD for id pattern: " + current_td_data);
            console.log(" %cApplicable ID: " + pattern1.test(current_td_data.trim()), "background-color:green;color:white");
            var result = "<a id='" + current_td_data.trim() + "' onclick='ver_relativos(`" + current_td_data.trim() + "`)' href='#" + current_td_data.trim() + "'>" + current_td_data.trim() + "</a>";
            console.log("Result: " + result);
            this.diccionario_ids_trazabilidad[current_td_data.trim()] = '';
            document.getElementsByTagName('td')[a].innerHTML = result;

          }

        }
      }
      for (let a = 0; a < document.getElementsByTagName('td').length; a++) {
        var current_td_data = document.getElementsByTagName('td')[a].innerHTML;
        if (document.getElementsByTagName('td')[a].childNodes.length == 1) {
          //Transformamos las strings de dependencias de cierto tipo a un Hyperlink para enfocar la dependencia.
          const pattern2 = /^D-R\d{3}\.SR\d{3}\.F\d{3}\.SF\d{3}\.P\d{3}\.SP\d{3}\.EC\d{3}$/;
          let new_dom_id = Date.now() + Math.random() * (99999 - 1111) + 1111;
          if (pattern2.test(current_td_data.trim())) {

            console.log("Testing TD for dep. id pattern: " + current_td_data);
            console.log(" %cApplicable Dependency ID: " + pattern2.test(current_td_data.trim()), "background-color:green;color:white");
            var result = "<a id='" + new_dom_id + "' href='#" + current_td_data.replace('D-', '') + "' onclick='seguir_pista(`" + new_dom_id + "`,`" + current_td_data.replace('D-', '') + "`)'>" + current_td_data.replace('D-', '') + "</a>";
            console.log("Result: " + result);
            this.diccionario_ids_dom[current_td_data.trim()] = '';
            document.getElementsByTagName('td')[a].innerHTML = result;

          }
        }
      }

    }




    function colocar_footer() {
      const footer = document.createElement('footer');
      const div = document.createElement('div');
      div.classList.add('footer-buttons');

      // Create 5 buttons
      for (let i = 1; i <= 5; i++) {
        const button = document.createElement('button');
        button.textContent = `Button ${i}`;
        div.appendChild(button);
      }

      // Append the div to the footer and the footer to the body
      footer.appendChild(div);
      document.body.appendChild(footer);

      // Add some CSS to make the footer stick to the bottom of the viewport
      const style = document.createElement('style');
      style.textContent = `
        body {
            margin: 0;
            padding: 0;
        }
    
        footer {
            position: fixed; /* Fix the footer at the bottom */
            left: 0;
            bottom: 0;
            width: 100%; /* Ensure it takes up the full width of the viewport */
            background-color: #333;
            color: white;
            padding: 10px;
            z-index: 1000; /* Ensure the footer stays above other content */
        }
    
        .footer-buttons {
            display: flex;
            justify-content: space-around;
        }
    
        button {
            background-color: #444;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
        }
    
        button:hover {
            background-color: #555;
        }
    `;

      document.head.appendChild(style);

      for (x in document.getElementsByTagName("table")) {
        document.getElementsByTagName("table")[x].className = "zoomable";
      }

      /*document.addEventListener('mouseover', function (e) {
        e = e || window.event;
        var target = e.target || e.srcElement,
          text = target.textContent || target.innerText;
          if(e.shiftKey){
        target.setAttribute('style',"-moz-transform: scale(2);-moz-transform-origin: 0 0;z-index:100;background-color:white;box-shadow: 10px 10px 5px #888;");
        var scaleFactor = 2;
        const rect = target.getBoundingClientRect();
        const offsetX = (window.innerWidth - rect.width * scaleFactor) / 2 - rect.left * scaleFactor;
        const offsetY = (window.innerHeight - rect.height * scaleFactor) / 2 - rect.top * scaleFactor;

        window.scrollTo({
          top: window.scrollY + offsetY,
          left: window.scrollX + offsetX,
          behavior: 'smooth' // Smooth scroll to the element
        });
      }else{
        target.removeAttribute('style',"-moz-transform: scale(2);-moz-transform-origin: 0 0;z-index:100;background-color:white;box-shadow: 10px 10px 5px #888;");
        var scaleFactor = 2;
        const rect = target.getBoundingClientRect();
      }
      }, false);

      document.addEventListener('mouseout', function (e) {
        e = e || window.event;
        var target = e.target || e.srcElement,
          text = target.textContent || target.innerText;
          if(!e.shiftKey){
       
          }
      }, false);

    */
    }

    function foldTablesOnMouseOut() {
            const tables = document.querySelectorAll('table');  // Select all tables

            tables.forEach(table => {
                // Set initial table style
                table.style.width = '100%';
                table.style.border = '1px solid #000';
                table.style.borderCollapse = 'collapse';
                table.querySelectorAll('th, td').forEach(cell => {
                    cell.style.padding = '10px';
                    cell.style.border = '1px solid #ddd';
                });

                // Add event listeners to fold table
                table.addEventListener('mouseover', function() {
                    table.style.display = 'table';  // Show table on hover
                });

                table.addEventListener('mouseout', function() {
                    table.style.display = 'none';  // Hide table when mouse leaves
                });
            });
        }

   
    function assignZIndexBasedOnNesting() {
    // Get all the table elements in the document
    const tables = document.querySelectorAll('table');

    // Iterate over each table
    tables.forEach(table => {
        // Calculate the nesting level of the current table
        let nestingLevel = 0;
        let parent = table.parentElement;

        // Traverse the DOM upwards to count the nesting level
        while (parent) {
            if (parent.tagName.toLowerCase() === 'table') {
                nestingLevel++;
            }
            parent = parent.parentElement;
        }

        // Assign the z-index based on the nesting level
        table.style.zIndex = nestingLevel;
    });
}

    
    window.onload = function (e) {
      colocar_migajas();
      assignZIndexBasedOnNesting();
      colocar_footer();
      foldTablesOnMouseOut();
    }

  </script>
</body>

</html>